<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSIF Informa</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; }
    body { background:#fff; color:#333; line-height:1.6; min-height:100vh; }
    body::after {
      content:""; position:fixed; top:0; left:0; width:100%; height:100%;
      background:url('csif.png') no-repeat center/90%; opacity:0.2; z-index:-1; pointer-events:none;
    }

    header {
      background:#2e7d32; color:#fff; padding:10px 15px;
      position:sticky; top:0; z-index:100; display:flex; justify-content:space-between; align-items:center;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
    }
    .logo { font-size:1.2rem; font-weight:bold; }
    .header-right { display:flex; align-items:center; gap:15px; }
    .csif-logo { height:50px; width:auto; }
    .user-btn,.admin-btn {
      background:rgba(255,255,255,0.2); border:none; color:#fff; padding:6px 12px; border-radius:20px;
      cursor:pointer; display:flex; align-items:center; gap:6px; transition:.3s;
    }
    .user-btn:hover,.admin-btn:hover { background:rgba(255,255,255,0.3); }
    .admin-btn { display:none; }
    .user-info { display:none; align-items:center; gap:8px; background:rgba(255,255,255,0.2); padding:6px 12px; border-radius:20px; }
    .logout-btn { background:none; border:none; color:#fff; cursor:pointer; font-size:0.8rem; text-decoration:underline; }

    /* Modal gen√©rico */
    .modal,.admin-modal {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;
    }
    .modal-content,.admin-modal-content {
      background:#fff; border-radius:10px; width:90%; max-width:400px; padding:20px;
      box-shadow:0 5px 15px rgba(0,0,0,0.3);
    }
    .admin-modal-content { max-width:600px; max-height:80vh; overflow-y:auto; }
    .modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid #eee; }
    .modal-title { font-size:1.1rem; color:#2e7d32; }
    .close-btn { background:none; border:none; font-size:1.4rem; cursor:pointer; color:#666; }

    .form-group { margin-bottom:12px; }
    .form-group label { display:block; margin-bottom:5px; font-weight:500; }
    .form-group input,.form-group select,.form-group textarea {
      width:100%; padding:10px; border:1px solid #ddd; border-radius:5px; font-size:1rem;
    }
    .login-btn,.save-btn {
      width:100%; padding:10px; background:#2e7d32; color:#fff; border:none; border-radius:5px;
      font-size:1rem; cursor:pointer; margin-top:10px;
    }
    .login-btn:hover,.save-btn:hover { background:#1b5e20; }

    .news-list { max-height:300px; overflow-y:auto; border:1px solid #eee; border-radius:5px; padding:10px; }
    .news-item { padding:10px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
    .news-item:last-child { border-bottom:none; }
    .action-btn { padding:5px 10px; border:none; border-radius:3px; cursor:pointer; font-size:0.8rem; }
    .edit-btn { background:#ffc107; color:#333; } .delete-btn { background:#f44336; color:#fff; }

    nav.main-nav { background:#1b5e20; padding:8px 0; position:sticky; top:60px; z-index:99; overflow-x:auto; }
    .nav-container { display:flex; gap:8px; padding:0 10px; }
    .nav-item { padding:6px 12px; border-radius:20px; background:rgba(255,255,255,0.15); color:#fff; cursor:pointer; font-size:0.85rem; }
    .nav-item.active { background:#fff; color:#1b5e20; font-weight:bold; }

    .sub-nav { display:none; background:#e8f5e9; padding:8px; }
    .sub-nav.active { display:block; }
    .sub-nav-container { display:flex; gap:8px; overflow-x:auto; }
    .sub-nav-item { padding:5px 10px; border-radius:15px; font-size:0.8rem; background:#fff; border:1px solid #c8e6c9; color:#2e7d32; cursor:pointer; }
    .sub-nav-item.active { background:#2e7d32; color:#fff; }

    main { padding:15px; padding-bottom:70px; } /* espacio para el footer fijo */
    .section-title { margin:15px 0; font-size:1.1rem; color:#2e7d32; border-bottom:2px solid #e8f5e9; padding-bottom:5px; }
    .news-card {
      background:#fff; border-radius:10px; overflow:hidden; margin-bottom:15px;
      box-shadow:0 2px 6px rgba(0,0,0,0.1); border-left:4px solid #2e7d32;
    }
    .news-card img { width:100%; height:160px; object-fit:cover; }
    .news-content { padding:12px; }
    .news-category { display:inline-block; background:#e8f5e9; color:#2e7d32; padding:3px 8px; border-radius:12px; font-size:0.75rem; margin-bottom:8px; font-weight:bold; }
    .news-title { font-size:1rem; margin-bottom:8px; color:#333; }
    .news-excerpt { font-size:0.85rem; color:#555; margin-bottom:10px; }
    .news-meta { font-size:0.75rem; color:#888; display:flex; justify-content:space-between; }

    /* Footer fijo y reducido */
    footer {
      position:fixed;
      bottom:0;
      left:0;
      width:100%;
      background:#1b5e20;
      color:#fff;
      padding:8px 10px;
      text-align:center;
      z-index:999;
      font-size:0.75rem;
    }
    .footer-links {
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:5px;
    }
    .footer-link {
      color:#a5d6a7;
      text-decoration:none;
      font-size:0.75rem;
    }

    .floating-btn {
      position:fixed; bottom:60px; right:15px; width:45px; height:45px;
      background:#2e7d32; color:#fff; border-radius:50%; display:none;
      justify-content:center; align-items:center; box-shadow:0 3px 8px rgba(0,0,0,0.2); font-size:1.2rem; cursor:pointer;
    }

    @media (min-width:768px) { .news-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:15px; } }
    @media (min-width:1024px) { .news-grid { grid-template-columns:repeat(3,1fr); } }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">CSIF Noticias</div>
    <div class="header-right">
      <img src="csif.png" alt="Logo CSIF" class="csif-logo">
      <button class="admin-btn" id="adminBtn">‚öô Administrar</button>
      <div class="user-info" id="userInfo">
        <span id="userName">Usuario</span>
        <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
      </div>
      <button class="user-btn" id="userBtn">üë§ Iniciar Sesi√≥n</button>
    </div>
  </header>

  <!-- Modal de Login -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Iniciar Sesi√≥n</h2>
        <button class="close-btn" id="closeModal">&times;</button>
      </div>
      <form id="loginForm">
        <div class="form-group">
          <label for="username">Selecciona tu usuario:</label>
          <select id="username" required></select>
        </div>
        <button type="submit" class="login-btn">Acceder</button>
      </form>
      <div id="loginMessage" style="margin-top:10px; color:red; display:none;"></div>
    </div>
  </div>

  <!-- Modal Admin -->
  <div class="admin-modal" id="adminModal">
    <div class="admin-modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Panel de Administraci√≥n</h2>
        <button class="close-btn" id="closeAdminModal">&times;</button>
      </div>
      <h3>Gesti√≥n de Noticias</h3>
      <form id="newsForm">
        <div class="form-group"><label>Categor√≠a:</label>
          <select id="newsCategory" required>
            <option value="">-- Selecciona --</option>
            <option value="ENFERMERIA">ENFERMERIA</option>
            <option value="TCAE">TCAE</option>
            <option value="ADMINISTRATIVO">ADMINISTRATIVO</option>
            <option value="AUXILIAR_ADMINISTRATIVO">AUXILIAR ADMINISTRATIVO</option>
            <option value="CELADOR">CELADOR</option>
            <option value="TECNICO_LABORATORIO">T√âCNICO DE LABORATORIO</option>
            <option value="MEDICINA">MEDICINA</option>
          </select>
        </div>
        <div class="form-group"><label>Subcategor√≠a:</label>
          <select id="newsSubcategory" required><option value="">-- Selecciona --</option></select>
        </div>
        <div class="form-group"><label>T√≠tulo:</label><input type="text" id="newsTitle" required></div>
        <div class="form-group"><label>Resumen:</label><textarea id="newsExcerpt" rows="3" required></textarea></div>
        <div class="form-group"><label>URL Imagen:</label><input type="text" id="newsImage" required></div>
        <button type="submit" class="save-btn">Guardar</button>
      </form>
      <h3 style="margin-top:20px;">Noticias Existentes</h3>
      <div class="news-list" id="newsList"></div>
    </div>
  </div>

  <!-- Navegaci√≥n -->
  <nav class="main-nav">
    <div class="nav-container">
      <div class="nav-item active" data-category="todas">Todas</div>
      <div class="nav-item" data-category="ADMINISTRATIVO">ADMINISTRATIVO</div>
      <div class="nav-item" data-category="AUXILIAR_ADMINISTRATIVO">AUXILIAR ADMIN.</div>
      <div class="nav-item" data-category="CELADOR">CELADOR</div>
      <div class="nav-item" data-category="ENFERMERIA">ENFERMERIA</div>
      <div class="nav-item" data-category="MEDICINA">MEDICINA</div>
      <div class="nav-item" data-category="TCAE">TCAE</div>
      <div class="nav-item" data-category="TECNICO_LABORATORIO">LABORATORIO</div>
    </div>
  </nav>

  <main>
    <h2 class="section-title" id="current-category">Todas las Noticias</h2>
    <div class="news-grid" id="news-container"></div>
  </main>

  <footer>
    <div class="footer-links">
      <a href="#" class="footer-link">Inicio</a>
      <a href="#" class="footer-link">Qui√©nes Somos</a>
      <a href="#" class="footer-link">Afiliaci√≥n</a>
      <a href="#" class="footer-link">Contacto</a>
      <a href="#" class="footer-link">Aviso Legal</a>
    </div>
    <div>&copy; 2025 CSIF - Todos los derechos reservados.</div>
  </footer>

  <div class="floating-btn">‚Üë</div>

  <script>
    // Usuarios predefinidos
    const users = [
      { username:"10000000A", name:"Administrador CSIF", role:"admin" },
      { username:"00000001A", name:"Mar√≠a L√≥pez", role:"Afiliado" },
      { username:"00000002A", name:"Carlos Rodr√≠guez", role:"Afiliado" }
    ];

    // Noticias demo
    let newsData = { todas:[
      {id:1,category:"ENFERMERIA",subcategory:"plantillas",title:"CSIF logra aumento de plantilla",excerpt:"Contrataci√≥n de 200 nuevos profesionales",image:"https://via.placeholder.com/400x200?text=Enfermer√≠a",date:"Hace 2h"},
      {id:2,category:"TCAE",subcategory:"turnos",title:"Mejoras en los turnos TCAE",excerpt:"Negociaci√≥n de rotaci√≥n de turnos",image:"https://via.placeholder.com/400x200?text=TCAE",date:"Hace 5h"}
    ]};

    document.addEventListener("DOMContentLoaded",()=>{
      const userBtn=document.getElementById("userBtn"), loginModal=document.getElementById("loginModal"),
      closeModal=document.getElementById("closeModal"), loginForm=document.getElementById("loginForm"),
      userInfo=document.getElementById("userInfo"), userName=document.getElementById("userName"),
      logoutBtn=document.getElementById("logoutBtn"), loginMessage=document.getElementById("loginMessage"),
      usernameSelect=document.getElementById("username"), adminBtn=document.getElementById("adminBtn"),
      adminModal=document.getElementById("adminModal"), closeAdminModal=document.getElementById("closeAdminModal"),
      newsContainer=document.getElementById("news-container");

      // Cargar usuarios en select
      users.forEach(u=>{
        const o=document.createElement("option"); o.value=u.username; o.textContent=`${u.name} (${u.role})`;
        usernameSelect.appendChild(o);
      });

      // Login
      userBtn.onclick=()=>loginModal.style.display="flex";
      closeModal.onclick=()=>{loginModal.style.display="none"; loginMessage.style.display="none";};
      loginForm.onsubmit=e=>{
        e.preventDefault();
        const u=users.find(us=>us.username===usernameSelect.value);
        if(u){localStorage.setItem("currentUser",JSON.stringify(u)); updateUI(u); loginModal.style.display="none";}
        else{loginMessage.textContent="Usuario no v√°lido"; loginMessage.style.display="block";}
      };
      logoutBtn.onclick=()=>{localStorage.removeItem("currentUser"); updateUI();};

      function updateUI(u){
        if(u){ userBtn.style.display="none"; userInfo.style.display="flex"; userName.textContent=u.name;
          if(u.role==="admin") adminBtn.style.display="flex";
        } else { userBtn.style.display="flex"; userInfo.style.display="none"; adminBtn.style.display="none"; }
      }
      const cu=localStorage.getItem("currentUser"); if(cu) updateUI(JSON.parse(cu));

      // Admin modal
      adminBtn.onclick=()=>adminModal.style.display="flex";
      closeAdminModal.onclick=()=>adminModal.style.display="none";

      // Mostrar noticias
      function displayNews(cat="todas"){
        newsContainer.innerHTML="";
        (newsData[cat]||[]).forEach(n=>{
          const c=document.createElement("div"); c.className="news-card";
          c.innerHTML=`<img src="${n.image}" loading="lazy"><div class="news-content">
          <span class="news-category">${n.category}</span>
          <h3 class="news-title">${n.title}</h3><p class="news-excerpt">${n.excerpt}</p>
          <div class="news-meta"><span>${n.date}</span><span>CSIF</span></div></div>`;
          newsContainer.appendChild(c);
        });
      }
      displayNews();

      // Nav
      document.querySelectorAll(".nav-item").forEach(it=>{
        it.onclick=()=>{document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active"));
          it.classList.add("active"); displayNews(it.dataset.category);};
      });

      // Bot√≥n scroll top
      const fb=document.querySelector(".floating-btn");
      fb.onclick=()=>window.scrollTo({top:0,behavior:"smooth"});
      window.onscroll=()=>{fb.style.display=window.scrollY>200?"flex":"none";}
    });
  </script>
</body>
</html>
